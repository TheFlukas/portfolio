# ТестовоеРасширение

**Подсистема расширения:** ИТ_Расширение

## Описание
Расширение реализует функционал для работы с документом **Пояснительная записка**, добавляет реквизиты, обработку справочника **Номенклатура** и отчет с рассылкой.

## Реализованные объекты

### 1. Документ: Пояснительная записка
- Возможность создания на основании документа **Заказ клиента**
- Реквизит для произвольного форматированного текста
- Возможность вставки изображений и прикрепления файлов
- Возможность просмотра связанных документов
- Печать (макет содержит дату, номер и текст записки)

### 2. Справочник: ИТ_ПояснительнаяЗапискаПрисоединенныеФайлы
- Для хранения файлов документа Пояснительная записка

### 3. Справочник: Номенклатура
- Добавлен реквизит **Сезон** (Лето, Зима, пусто)
- Форма элемента: реквизит **Сезон** отображается на форме
- Обработка **ИТ_ЗаполнениеСезона** для случайного заполнения сезонов

### 4. Перечисление: ИТ_Сезон
- Значения: Лето, Зима

### 5. Отчет: ИТ_ПояснительныеЗапискиЗаДень
- Вывод документов Пояснительная записка за текущий день
- Настроена рассылка отчетов по будням (кроме выходных) всем пользователям

### 6. Общие модули и подписки
- Отредактирован общий модуль **СтруктураПодчиненностиСлужебный** для работы связанных документов
- Подписка на событие **ОпределитьФормуПрисоединенногоФайлаВзаимодействия** для хранения файлов
- Общая команда **ИТ_СоздатьНаОсновании** для показа команды создания на основании заказа клиента документа Пояснительная записка

### 7. Типовые объекты подсистемы
- Расширение использует **Стандартную подсистему ДополнительныеОтчетыИОбработки**
- Создан критерий отбора **ИТ_СвязанныеДокументы**
- Отредактированы определяемые типы:
  - ПрисоединенныйФайл
  - ПрисоединенныйФайлОбъект
  - ВладелецПрисоединенныхФайлов
  - ВладелецПрисоединенныхФайловОбъект
- Отредактированы процедуры типовой формы **СвязанныеДокументы**:
  - `ИТ_ОбъектыПоКритериюОтбора`
  - `ИТ_ВывестиРодительскиеОбъекты`
- Добавлены реквизиты на форме документа Пояснительная записка

## Инструкция по использованию
1. **Документ Пояснительная записка**
   - Создается на основании документа **Заказ клиента**
   - Пользователь может писать форматированный текст, добавлять изображения и файлы
   - Доступна печать и просмотр связанных документов

2. **Заполнение реквизита Сезон у номенклатуры**
   - Использовать обработку **ИТ_ЗаполнениеСезона**
   - Можно очистить с помощью соответствующей кнопки в обработке

3. **Отчет Пояснительные записки за день**
   - Формируется при помощи стандартных механизмов 1С:УТ "Рассылка отчетов", добавлен дополнительный отчет
   - Рассылка настроена на будние дни

## Примечания
- Все доработки выполнены в расширении **ТестовоеРасширение**, типовая конфигурация не изменялась
- Расширение включает подсистему **ИТ_Расширение**
- Для работы связанных документов использована стандартная логика с расширением методов через модули

