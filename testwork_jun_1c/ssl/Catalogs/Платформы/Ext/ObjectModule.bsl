&НаСервере
Процедура ПередЗаписью(Отказ)

    Попытка
        // Проверка уникальности ЧисловогоКод
        Запрос = Новый Запрос;
        Запрос.Текст = 
        "ВЫБРАТЬ
        |    Платформа.Ссылка
        |ИЗ
        |    Справочник.Платформы КАК Платформа
        |ГДЕ
        |    Платформа.ЧисловойКод = &ЧисловойКод
        |    И Платформа.Ссылка <> &ТекущийЭлемент";

        // Параметры
        Запрос.УстановитьПараметр("ЧисловойКод", ЧисловойКод);
        Запрос.УстановитьПараметр("ТекущийЭлемент", Ссылка);

        Выборка = Запрос.Выполнить().Выбрать();

        Если Выборка.Следующий() Тогда
            Отказ = Истина; // запрещаем запись
            Сообщить("ЧисловойКод должен быть уникальным. Элемент с таким кодом уже существует.");
            Возврат;
        КонецЕсли;

    Исключение
        Сообщить("Ошибка проверки уникальности: " + ОписаниеОшибки());
        Отказ = Истина;
    КонецПопытки;

КонецПроцедуры